async function* chunkIterator(array, chunkSize) {
    for (let i = 0; i < array.length; i += chunkSize) {
        yield array.slice(i, i + chunkSize);
    }
}

async function processChunks(array, asyncCallback, chunkSize = 5) {
    let results = [];
    console.log('Starting chunk processing...');
    
    for await (const chunk of chunkIterator(array, chunkSize)) {
        console.log(`Processing chunk: ${JSON.stringify(chunk)}`);
        
        const chunkResult = await Promise.all(chunk.map(async (item) => {
            console.log(`Processing item: ${item}`);
            return await asyncCallback(item);
        }));
        
        console.log(`Processed chunk results: ${JSON.stringify(chunkResult)}`);
        results.push(...chunkResult);
    }

    console.log('All chunks processed.');
    return results;
}